server {
    listen    80;
    listen   443;
    #https://sql.guru/
    server_name  .sql.guru www.sql.guru;
    
    ssl    on;
    ssl_certificate    /etc/nginx/sites-ssl/sql.guru/sql.guru.pem;
    ssl_certificate_key    /etc/nginx/sites-ssl/sql.guru/sql.guru.key;


    #charset koi8-r;
    access_log   /var/log/nginx/sql.guru.access.log;
    
    root /web/sql.guru;
    

    # if a file, which is not found in the root folder is requested,
    # then the proxy pass the request to the upsteam (gitlab unicorn)
	location / {
		proxy_read_timeout 300;
		proxy_connect_timeout 300;
		proxy_redirect     off;

		proxy_set_header   X-Forwarded-Proto $scheme;
		proxy_set_header   Host              $http_host;
		proxy_set_header   X-Real-IP         $remote_addr;
		proxy_pass_request_headers on;
		#proxy_pass        http://localhost:5080;
                proxy_pass         https://localhost:59801;
	}

}

